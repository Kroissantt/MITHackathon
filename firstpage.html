<html>
  <head>
    <script src="jquery-3.3.1.min.js"></script>
    <script>
      function invokeOption(){
        var _selOption = $("#selOptions").val();
        if(_selOption == "zip")
          getZipCode();
        else
          getLatLong();
      }

      function getZipCode(){
        var _zip = $("#txtZipCode").val();
        if(_zip==""){
          alert("Please enter a valid ZipCode");
          return;
        }
        var _url = "https://nominatim.openstreetmap.org/search?format=json&polygon=0&addressdetails=0&countrycodes=us&limit=1&q="+_zip;
        $.ajax({
          method: "GET",
          url: _url,
          crossDomain: true,
          success : function(data){
            if(data!=null && data.length >0){
              var _singleObj = data[0];
              $("#txtLatitude").val(_singleObj.lat);
              $("#txtLongitude").val(_singleObj.lon);
              $("#lblZipCodeArea").text(_singleObj.display_name);
              getLatLong();
            }
          }
        });
      }

      function getLatLong(){
        var _lat = $("#txtLatitude").val();
        var _lon = $("#txtLongitude").val();
        //var _url = "https://api.darksky.net/forecast/63aee1dff2e8d802ea7ac85efaacb230/37.8267,-122.4233";

        var _url = "https://api.darksky.net/forecast/63aee1dff2e8d802ea7ac85efaacb230/"+_lat+","+_lon;
        $.ajax({
          method: "GET",
          url: _url,
          crossDomain: true,
          dataType: 'jsonp',
          success : function(data){
            console.log(data);
            console.log("Latitude:"+data.latitude);
            $("#lblTimeZone").text(data.timezone);
            $("#lblSummary").text(data.currently.summary);
          }
        });
      }
      function clearValues(){
        $("#txtLatitude").val("");
        $("#txtLongitude").val("");
        $("#txtZipCode").val("");
      }
      function ShowHideOptions(){
        var _selOption = $("#selOptions").val();
        $(".showhideoptionsclass").hide();
        clearValues();
        if(_selOption=="zip")
        	$("#tblZip").show();
        else
        	$("#tblLatLong").show();
      } 
    </script>
  </head>
  <body>
    <select onchange="ShowHideOptions()" id="selOptions">
      <option value="zip">Zip Code</option>
      <option value="coordinates">Lat-Long</option>
    </select>

    <table id="tblZip" class="showhideoptionsclass">
      <tr>
        <td>Enter Zipcode:</td>
        <td><input type="text" id="txtZipCode"></td>
      </tr>
    </table>

    <table id="tblLatLong"  style="display:none" class="showhideoptionsclass">
    	<tr>
    		<td>Enter Latitude:</td>
    		<td><input type="text" id="txtLatitude"></td>
    	</tr>
    	<tr>
    		<td>Enter Longitude:</td>
        <td><input type="text" id="txtLongitude"></td>
      </tr>
    </table>

    <input type="button" onclick="invokeOption()" name="Show Weather" value="Show Weather"/>
    <br/>
    Township: <label id="lblZipCodeArea"></label>
    <br/>
    Timezone: <label id="lblTimeZone"></label>
    <br/>
    Summary: <label id="lblSummary"></label>
  </body>
</html>